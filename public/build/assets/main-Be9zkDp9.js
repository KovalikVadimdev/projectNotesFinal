import{a as mt,h as yt}from"./profileName-BissPeNV.js";var U=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function st(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}function vt(l){if(Object.prototype.hasOwnProperty.call(l,"__esModule"))return l;var o=l.default;if(typeof o=="function"){var h=function u(){return this instanceof u?Reflect.construct(o,arguments,this.constructor):o.apply(this,arguments)};h.prototype=o.prototype}else h={};return Object.defineProperty(h,"__esModule",{value:!0}),Object.keys(l).forEach(function(u){var y=Object.getOwnPropertyDescriptor(l,u);Object.defineProperty(h,u,y.get?y:{enumerable:!0,get:function(){return l[u]}})}),h}var $={exports:{}};function wt(l){throw new Error('Could not dynamically require "'+l+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var P={exports:{}};const St={},xt=Object.freeze(Object.defineProperty({__proto__:null,default:St},Symbol.toStringTag,{value:"Module"})),at=vt(xt);var _t=P.exports,tt;function kt(){return tt||(tt=1,function(l,o){(function(h,u){l.exports=u()})(_t,function(){var h=h||function(u,y){var g;if(typeof window<"u"&&window.crypto&&(g=window.crypto),typeof self<"u"&&self.crypto&&(g=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(g=globalThis.crypto),!g&&typeof window<"u"&&window.msCrypto&&(g=window.msCrypto),!g&&typeof U<"u"&&U.crypto&&(g=U.crypto),!g&&typeof wt=="function")try{g=at}catch{}var E=function(){if(g){if(typeof g.getRandomValues=="function")try{return g.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof g.randomBytes=="function")try{return g.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},b=Object.create||function(){function i(){}return function(s){var a;return i.prototype=s,a=new i,i.prototype=null,a}}(),v={},x=v.lib={},k=x.Base=function(){return{extend:function(i){var s=b(this);return i&&s.mixIn(i),(!s.hasOwnProperty("init")||this.init===s.init)&&(s.init=function(){s.$super.init.apply(this,arguments)}),s.init.prototype=s,s.$super=this,s},create:function(){var i=this.extend();return i.init.apply(i,arguments),i},init:function(){},mixIn:function(i){for(var s in i)i.hasOwnProperty(s)&&(this[s]=i[s]);i.hasOwnProperty("toString")&&(this.toString=i.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),w=x.WordArray=k.extend({init:function(i,s){i=this.words=i||[],s!=y?this.sigBytes=s:this.sigBytes=i.length*4},toString:function(i){return(i||S).stringify(this)},concat:function(i){var s=this.words,a=i.words,c=this.sigBytes,d=i.sigBytes;if(this.clamp(),c%4)for(var f=0;f<d;f++){var m=a[f>>>2]>>>24-f%4*8&255;s[c+f>>>2]|=m<<24-(c+f)%4*8}else for(var p=0;p<d;p+=4)s[c+p>>>2]=a[p>>>2];return this.sigBytes+=d,this},clamp:function(){var i=this.words,s=this.sigBytes;i[s>>>2]&=4294967295<<32-s%4*8,i.length=u.ceil(s/4)},clone:function(){var i=k.clone.call(this);return i.words=this.words.slice(0),i},random:function(i){for(var s=[],a=0;a<i;a+=4)s.push(E());return new w.init(s,i)}}),B=v.enc={},S=B.Hex={stringify:function(i){for(var s=i.words,a=i.sigBytes,c=[],d=0;d<a;d++){var f=s[d>>>2]>>>24-d%4*8&255;c.push((f>>>4).toString(16)),c.push((f&15).toString(16))}return c.join("")},parse:function(i){for(var s=i.length,a=[],c=0;c<s;c+=2)a[c>>>3]|=parseInt(i.substr(c,2),16)<<24-c%8*4;return new w.init(a,s/2)}},t=B.Latin1={stringify:function(i){for(var s=i.words,a=i.sigBytes,c=[],d=0;d<a;d++){var f=s[d>>>2]>>>24-d%4*8&255;c.push(String.fromCharCode(f))}return c.join("")},parse:function(i){for(var s=i.length,a=[],c=0;c<s;c++)a[c>>>2]|=(i.charCodeAt(c)&255)<<24-c%4*8;return new w.init(a,s)}},e=B.Utf8={stringify:function(i){try{return decodeURIComponent(escape(t.stringify(i)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(i){return t.parse(unescape(encodeURIComponent(i)))}},n=x.BufferedBlockAlgorithm=k.extend({reset:function(){this._data=new w.init,this._nDataBytes=0},_append:function(i){typeof i=="string"&&(i=e.parse(i)),this._data.concat(i),this._nDataBytes+=i.sigBytes},_process:function(i){var s,a=this._data,c=a.words,d=a.sigBytes,f=this.blockSize,m=f*4,p=d/m;i?p=u.ceil(p):p=u.max((p|0)-this._minBufferSize,0);var _=p*f,D=u.min(_*4,d);if(_){for(var L=0;L<_;L+=f)this._doProcessBlock(c,L);s=c.splice(0,_),a.sigBytes-=D}return new w.init(s,D)},clone:function(){var i=k.clone.call(this);return i._data=this._data.clone(),i},_minBufferSize:0});x.Hasher=n.extend({cfg:k.extend(),init:function(i){this.cfg=this.cfg.extend(i),this.reset()},reset:function(){n.reset.call(this),this._doReset()},update:function(i){return this._append(i),this._process(),this},finalize:function(i){i&&this._append(i);var s=this._doFinalize();return s},blockSize:16,_createHelper:function(i){return function(s,a){return new i.init(a).finalize(s)}},_createHmacHelper:function(i){return function(s,a){return new r.HMAC.init(i,a).finalize(s)}}});var r=v.algo={};return v}(Math);return h})}(P)),P.exports}var bt=$.exports,et;function Et(){return et||(et=1,function(l,o){(function(h,u){l.exports=u(kt())})(bt,function(h){return function(u){var y=h,g=y.lib,E=g.WordArray,b=g.Hasher,v=y.algo,x=[],k=[];(function(){function S(r){for(var i=u.sqrt(r),s=2;s<=i;s++)if(!(r%s))return!1;return!0}function t(r){return(r-(r|0))*4294967296|0}for(var e=2,n=0;n<64;)S(e)&&(n<8&&(x[n]=t(u.pow(e,1/2))),k[n]=t(u.pow(e,1/3)),n++),e++})();var w=[],B=v.SHA256=b.extend({_doReset:function(){this._hash=new E.init(x.slice(0))},_doProcessBlock:function(S,t){for(var e=this._hash.words,n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],c=e[5],d=e[6],f=e[7],m=0;m<64;m++){if(m<16)w[m]=S[t+m]|0;else{var p=w[m-15],_=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,D=w[m-2],L=(D<<15|D>>>17)^(D<<13|D>>>19)^D>>>10;w[m]=_+w[m-7]+L+w[m-16]}var M=a&c^~a&d,j=n&r^n&i^r&i,T=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),pt=(a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25),Q=f+pt+M+k[m]+w[m],gt=T+j;f=d,d=c,c=a,a=s+Q|0,s=i,i=r,r=n,n=Q+gt|0}e[0]=e[0]+n|0,e[1]=e[1]+r|0,e[2]=e[2]+i|0,e[3]=e[3]+s|0,e[4]=e[4]+a|0,e[5]=e[5]+c|0,e[6]=e[6]+d|0,e[7]=e[7]+f|0},_doFinalize:function(){var S=this._data,t=S.words,e=this._nDataBytes*8,n=S.sigBytes*8;return t[n>>>5]|=128<<24-n%32,t[(n+64>>>9<<4)+14]=u.floor(e/4294967296),t[(n+64>>>9<<4)+15]=e,S.sigBytes=t.length*4,this._process(),this._hash},clone:function(){var S=b.clone.call(this);return S._hash=this._hash.clone(),S}});y.SHA256=b._createHelper(B),y.HmacSHA256=b._createHmacHelper(B)}(Math),h.SHA256})}($)),$.exports}var Bt=Et();const Dt=st(Bt);var z={exports:{}},nt;function Lt(){return nt||(nt=1,function(l){var o={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(t){this.toString=function(){return"CORRUPT: "+this.message},this.message=t},invalid:function(t){this.toString=function(){return"INVALID: "+this.message},this.message=t},bug:function(t){this.toString=function(){return"BUG: "+this.message},this.message=t},notReady:function(t){this.toString=function(){return"NOT READY: "+this.message},this.message=t}}};o.cipher.aes=function(t){this.s[0][0][0]||this.O();var e,n,r,i,s=this.s[0][4],a=this.s[1];e=t.length;var c=1;if(e!==4&&e!==6&&e!==8)throw new o.exception.invalid("invalid aes key size");for(this.b=[r=t.slice(0),i=[]],t=e;t<4*e+28;t++)n=r[t-1],(t%e===0||e===8&&t%e===4)&&(n=s[n>>>24]<<24^s[n>>16&255]<<16^s[n>>8&255]<<8^s[n&255],t%e===0&&(n=n<<8^n>>>24^c<<24,c=c<<1^283*(c>>7))),r[t]=r[t-e]^n;for(e=0;t;e++,t--)n=r[e&3?t:t-4],i[e]=4>=t||4>e?n:a[0][s[n>>>24]]^a[1][s[n>>16&255]]^a[2][s[n>>8&255]]^a[3][s[n&255]]},o.cipher.aes.prototype={encrypt:function(t){return h(this,t,0)},decrypt:function(t){return h(this,t,1)},s:[[[],[],[],[],[]],[[],[],[],[],[]]],O:function(){var t=this.s[0],e=this.s[1],n=t[4],r=e[4],i,s,a,c=[],d=[],f,m,p,_;for(i=0;256>i;i++)d[(c[i]=i<<1^283*(i>>7))^i]=i;for(s=a=0;!n[s];s^=f||1,a=d[a]||1)for(p=a^a<<1^a<<2^a<<3^a<<4,p=p>>8^p&255^99,n[s]=p,r[p]=s,m=c[i=c[f=c[s]]],_=16843009*m^65537*i^257*f^16843008*s,m=257*c[p]^16843008*p,i=0;4>i;i++)t[i][s]=m=m<<24^m>>>8,e[i][p]=_=_<<24^_>>>8;for(i=0;5>i;i++)t[i]=t[i].slice(0),e[i]=e[i].slice(0)}};function h(t,e,n){if(e.length!==4)throw new o.exception.invalid("invalid aes block size");var r=t.b[n],i=e[0]^r[0],s=e[n?3:1]^r[1],a=e[2]^r[2];e=e[n?1:3]^r[3];var c,d,f,m=r.length/4-2,p,_=4,D=[0,0,0,0];c=t.s[n],t=c[0];var L=c[1],M=c[2],j=c[3],T=c[4];for(p=0;p<m;p++)c=t[i>>>24]^L[s>>16&255]^M[a>>8&255]^j[e&255]^r[_],d=t[s>>>24]^L[a>>16&255]^M[e>>8&255]^j[i&255]^r[_+1],f=t[a>>>24]^L[e>>16&255]^M[i>>8&255]^j[s&255]^r[_+2],e=t[e>>>24]^L[i>>16&255]^M[s>>8&255]^j[a&255]^r[_+3],_+=4,i=c,s=d,a=f;for(p=0;4>p;p++)D[n?3&-p:p]=T[i>>>24]<<24^T[s>>16&255]<<16^T[a>>8&255]<<8^T[e&255]^r[_++],c=i,i=s,s=a,a=e,e=c;return D}o.bitArray={bitSlice:function(t,e,n){return t=o.bitArray.$(t.slice(e/32),32-(e&31)).slice(1),n===void 0?t:o.bitArray.clamp(t,n-e)},extract:function(t,e,n){var r=Math.floor(-e-n&31);return((e+n-1^e)&-32?t[e/32|0]<<32-r^t[e/32+1|0]>>>r:t[e/32|0]>>>r)&(1<<n)-1},concat:function(t,e){if(t.length===0||e.length===0)return t.concat(e);var n=t[t.length-1],r=o.bitArray.getPartial(n);return r===32?t.concat(e):o.bitArray.$(e,r,n|0,t.slice(0,t.length-1))},bitLength:function(t){var e=t.length;return e===0?0:32*(e-1)+o.bitArray.getPartial(t[e-1])},clamp:function(t,e){if(32*t.length<e)return t;t=t.slice(0,Math.ceil(e/32));var n=t.length;return e=e&31,0<n&&e&&(t[n-1]=o.bitArray.partial(e,t[n-1]&2147483648>>e-1,1)),t},partial:function(t,e,n){return t===32?e:(n?e|0:e<<32-t)+1099511627776*t},getPartial:function(t){return Math.round(t/1099511627776)||32},equal:function(t,e){if(o.bitArray.bitLength(t)!==o.bitArray.bitLength(e))return!1;var n=0,r;for(r=0;r<t.length;r++)n|=t[r]^e[r];return n===0},$:function(t,e,n,r){var i;for(i=0,r===void 0&&(r=[]);32<=e;e-=32)r.push(n),n=0;if(e===0)return r.concat(t);for(i=0;i<t.length;i++)r.push(n|t[i]>>>e),n=t[i]<<32-e;return i=t.length?t[t.length-1]:0,t=o.bitArray.getPartial(i),r.push(o.bitArray.partial(e+t&31,32<e+t?n:r.pop(),1)),r},i:function(t,e){return[t[0]^e[0],t[1]^e[1],t[2]^e[2],t[3]^e[3]]},byteswapM:function(t){var e,n;for(e=0;e<t.length;++e)n=t[e],t[e]=n>>>24|n>>>8&65280|(n&65280)<<8|n<<24;return t}},o.codec.utf8String={fromBits:function(t){var e="",n=o.bitArray.bitLength(t),r,i;for(r=0;r<n/8;r++)(r&3)===0&&(i=t[r/4]),e+=String.fromCharCode(i>>>8>>>8>>>8),i<<=8;return decodeURIComponent(escape(e))},toBits:function(t){t=unescape(encodeURIComponent(t));var e=[],n,r=0;for(n=0;n<t.length;n++)r=r<<8|t.charCodeAt(n),(n&3)===3&&(e.push(r),r=0);return n&3&&e.push(o.bitArray.partial(8*(n&3),r)),e}},o.codec.hex={fromBits:function(t){var e="",n;for(n=0;n<t.length;n++)e+=((t[n]|0)+0xf00000000000).toString(16).substr(4);return e.substr(0,o.bitArray.bitLength(t)/4)},toBits:function(t){var e,n=[],r;for(t=t.replace(/\s|0x/g,""),r=t.length,t=t+"00000000",e=0;e<t.length;e+=8)n.push(parseInt(t.substr(e,8),16)^0);return o.bitArray.clamp(n,4*r)}},o.codec.base32={B:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",X:"0123456789ABCDEFGHIJKLMNOPQRSTUV",BITS:32,BASE:5,REMAINING:27,fromBits:function(t,e,n){var r=o.codec.base32.BASE,i=o.codec.base32.REMAINING,s="",a=0,c=o.codec.base32.B,d=0,f=o.bitArray.bitLength(t);for(n&&(c=o.codec.base32.X),n=0;s.length*r<f;)s+=c.charAt((d^t[n]>>>a)>>>i),a<r?(d=t[n]<<r-a,a+=i,n++):(d<<=r,a-=r);for(;s.length&7&&!e;)s+="=";return s},toBits:function(t,e){t=t.replace(/\s|=/g,"").toUpperCase();var n=o.codec.base32.BITS,r=o.codec.base32.BASE,i=o.codec.base32.REMAINING,s=[],a,c=0,d=o.codec.base32.B,f=0,m,p="base32";for(e&&(d=o.codec.base32.X,p="base32hex"),a=0;a<t.length;a++){if(m=d.indexOf(t.charAt(a)),0>m){if(!e)try{return o.codec.base32hex.toBits(t)}catch{}throw new o.exception.invalid("this isn't "+p+"!")}c>i?(c-=i,s.push(f^m>>>c),f=m<<n-c):(c+=r,f^=m<<n-c)}return c&56&&s.push(o.bitArray.partial(c&56,f,1)),s}},o.codec.base32hex={fromBits:function(t,e){return o.codec.base32.fromBits(t,e,1)},toBits:function(t){return o.codec.base32.toBits(t,1)}},o.codec.base64={B:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(t,e,n){var r="",i=0,s=o.codec.base64.B,a=0,c=o.bitArray.bitLength(t);for(n&&(s=s.substr(0,62)+"-_"),n=0;6*r.length<c;)r+=s.charAt((a^t[n]>>>i)>>>26),6>i?(a=t[n]<<6-i,i+=26,n++):(a<<=6,i-=6);for(;r.length&3&&!e;)r+="=";return r},toBits:function(t,e){t=t.replace(/\s|=/g,"");var n=[],r,i=0,s=o.codec.base64.B,a=0,c;for(e&&(s=s.substr(0,62)+"-_"),r=0;r<t.length;r++){if(c=s.indexOf(t.charAt(r)),0>c)throw new o.exception.invalid("this isn't base64!");26<i?(i-=26,n.push(a^c>>>i),a=c<<32-i):(i+=6,a^=c<<32-i)}return i&56&&n.push(o.bitArray.partial(i&56,a,1)),n}},o.codec.base64url={fromBits:function(t){return o.codec.base64.fromBits(t,1,1)},toBits:function(t){return o.codec.base64.toBits(t,1)}},o.hash.sha256=function(t){this.b[0]||this.O(),t?(this.F=t.F.slice(0),this.A=t.A.slice(0),this.l=t.l):this.reset()},o.hash.sha256.hash=function(t){return new o.hash.sha256().update(t).finalize()},o.hash.sha256.prototype={blockSize:512,reset:function(){return this.F=this.Y.slice(0),this.A=[],this.l=0,this},update:function(t){typeof t=="string"&&(t=o.codec.utf8String.toBits(t));var e,n=this.A=o.bitArray.concat(this.A,t);if(e=this.l,t=this.l=e+o.bitArray.bitLength(t),9007199254740991<t)throw new o.exception.invalid("Cannot hash more than 2^53 - 1 bits");if(typeof Uint32Array<"u"){var r=new Uint32Array(n),i=0;for(e=512+e-(512+e&511);e<=t;e+=512)u(this,r.subarray(16*i,16*(i+1))),i+=1;n.splice(0,16*i)}else for(e=512+e-(512+e&511);e<=t;e+=512)u(this,n.splice(0,16));return this},finalize:function(){var t,n=this.A,e=this.F,n=o.bitArray.concat(n,[o.bitArray.partial(1,1)]);for(t=n.length+2;t&15;t++)n.push(0);for(n.push(Math.floor(this.l/4294967296)),n.push(this.l|0);n.length;)u(this,n.splice(0,16));return this.reset(),e},Y:[],b:[],O:function(){function t(s){return 4294967296*(s-Math.floor(s))|0}for(var e=0,n=2,r,i;64>e;n++){for(i=!0,r=2;r*r<=n;r++)if(n%r===0){i=!1;break}i&&(8>e&&(this.Y[e]=t(Math.pow(n,.5))),this.b[e]=t(Math.pow(n,1/3)),e++)}}};function u(t,e){var n,r,i,s=t.F,a=t.b,c=s[0],d=s[1],f=s[2],m=s[3],p=s[4],_=s[5],D=s[6],L=s[7];for(n=0;64>n;n++)16>n?r=e[n]:(r=e[n+1&15],i=e[n+14&15],r=e[n&15]=(r>>>7^r>>>18^r>>>3^r<<25^r<<14)+(i>>>17^i>>>19^i>>>10^i<<15^i<<13)+e[n&15]+e[n+9&15]|0),r=r+L+(p>>>6^p>>>11^p>>>25^p<<26^p<<21^p<<7)+(D^p&(_^D))+a[n],L=D,D=_,_=p,p=m+r|0,m=f,f=d,d=c,c=r+(d&f^m&(d^f))+(d>>>2^d>>>13^d>>>22^d<<30^d<<19^d<<10)|0;s[0]=s[0]+c|0,s[1]=s[1]+d|0,s[2]=s[2]+f|0,s[3]=s[3]+m|0,s[4]=s[4]+p|0,s[5]=s[5]+_|0,s[6]=s[6]+D|0,s[7]=s[7]+L|0}o.mode.ccm={name:"ccm",G:[],listenProgress:function(t){o.mode.ccm.G.push(t)},unListenProgress:function(t){t=o.mode.ccm.G.indexOf(t),-1<t&&o.mode.ccm.G.splice(t,1)},fa:function(t){var e=o.mode.ccm.G.slice(),n;for(n=0;n<e.length;n+=1)e[n](t)},encrypt:function(t,e,n,r,i){var s,a=e.slice(0),c=o.bitArray,d=c.bitLength(n)/8,f=c.bitLength(a)/8;if(i=i||64,r=r||[],7>d)throw new o.exception.invalid("ccm: iv must be at least 7 bytes");for(s=2;4>s&&f>>>8*s;s++);return s<15-d&&(s=15-d),n=c.clamp(n,8*(15-s)),e=o.mode.ccm.V(t,e,n,r,i,s),a=o.mode.ccm.C(t,a,n,e,i,s),c.concat(a.data,a.tag)},decrypt:function(t,e,n,r,i){i=i||64,r=r||[];var s=o.bitArray,a=s.bitLength(n)/8,f=s.bitLength(e),c=s.clamp(e,f-i),d=s.bitSlice(e,f-i),f=(f-i)/8;if(7>a)throw new o.exception.invalid("ccm: iv must be at least 7 bytes");for(e=2;4>e&&f>>>8*e;e++);if(e<15-a&&(e=15-a),n=s.clamp(n,8*(15-e)),c=o.mode.ccm.C(t,c,n,d,i,e),t=o.mode.ccm.V(t,c.data,n,r,i,e),!s.equal(c.tag,t))throw new o.exception.corrupt("ccm: tag doesn't match");return c.data},na:function(t,e,n,r,i,s){var a=[],c=o.bitArray,d=c.i;if(r=[c.partial(8,(e.length?64:0)|r-2<<2|s-1)],r=c.concat(r,n),r[3]|=i,r=t.encrypt(r),e.length)for(n=c.bitLength(e)/8,65279>=n?a=[c.partial(16,n)]:4294967295>=n&&(a=c.concat([c.partial(16,65534)],[n])),a=c.concat(a,e),e=0;e<a.length;e+=4)r=t.encrypt(d(r,a.slice(e,e+4).concat([0,0,0])));return r},V:function(t,e,n,r,i,s){var a=o.bitArray,c=a.i;if(i/=8,i%2||4>i||16<i)throw new o.exception.invalid("ccm: invalid tag length");if(4294967295<r.length||4294967295<e.length)throw new o.exception.bug("ccm: can't deal with 4GiB or more data");for(n=o.mode.ccm.na(t,r,n,i,a.bitLength(e)/8,s),r=0;r<e.length;r+=4)n=t.encrypt(c(n,e.slice(r,r+4).concat([0,0,0])));return a.clamp(n,8*i)},C:function(t,e,n,r,i,s){var a,c=o.bitArray;a=c.i;var d=e.length,f=c.bitLength(e),m=d/50,p=m;if(n=c.concat([c.partial(8,s-1)],n).concat([0,0,0]).slice(0,4),r=c.bitSlice(a(r,t.encrypt(n)),0,i),!d)return{tag:r,data:[]};for(a=0;a<d;a+=4)a>m&&(o.mode.ccm.fa(a/d),m+=p),n[3]++,i=t.encrypt(n),e[a]^=i[0],e[a+1]^=i[1],e[a+2]^=i[2],e[a+3]^=i[3];return{tag:r,data:c.clamp(e,f)}}},o.mode.ocb2={name:"ocb2",encrypt:function(t,e,n,r,i,s){if(o.bitArray.bitLength(n)!==128)throw new o.exception.invalid("ocb iv must be 128 bits");var a,c=o.mode.ocb2.S,d=o.bitArray,f=d.i,m=[0,0,0,0];n=c(t.encrypt(n));var p,_=[];for(r=r||[],i=i||64,a=0;a+4<e.length;a+=4)p=e.slice(a,a+4),m=f(m,p),_=_.concat(f(n,t.encrypt(f(n,p)))),n=c(n);return p=e.slice(a),e=d.bitLength(p),a=t.encrypt(f(n,[0,0,0,e])),p=d.clamp(f(p.concat([0,0,0]),a),e),m=f(m,f(p.concat([0,0,0]),a)),m=t.encrypt(f(m,f(n,c(n)))),r.length&&(m=f(m,s?r:o.mode.ocb2.pmac(t,r))),_.concat(d.concat(p,d.clamp(m,i)))},decrypt:function(t,e,n,r,i,s){if(o.bitArray.bitLength(n)!==128)throw new o.exception.invalid("ocb iv must be 128 bits");i=i||64;var a=o.mode.ocb2.S,c=o.bitArray,d=c.i,f=[0,0,0,0],m=a(t.encrypt(n)),p,_,D=o.bitArray.bitLength(e)-i,L=[];for(r=r||[],n=0;n+4<D/32;n+=4)p=d(m,t.decrypt(d(m,e.slice(n,n+4)))),f=d(f,p),L=L.concat(p),m=a(m);if(_=D-32*n,p=t.encrypt(d(m,[0,0,0,_])),p=d(p,c.clamp(e.slice(n),_).concat([0,0,0])),f=d(f,p),f=t.encrypt(d(f,d(m,a(m)))),r.length&&(f=d(f,s?r:o.mode.ocb2.pmac(t,r))),!c.equal(c.clamp(f,i),c.bitSlice(e,D)))throw new o.exception.corrupt("ocb: tag doesn't match");return L.concat(c.clamp(p,_))},pmac:function(t,e){var n,r=o.mode.ocb2.S,i=o.bitArray,s=i.i,a=[0,0,0,0],c=t.encrypt([0,0,0,0]),c=s(c,r(r(c)));for(n=0;n+4<e.length;n+=4)c=r(c),a=s(a,t.encrypt(s(c,e.slice(n,n+4))));return n=e.slice(n),128>i.bitLength(n)&&(c=s(c,r(c)),n=i.concat(n,[-2147483648,0,0,0])),a=s(a,n),t.encrypt(s(r(s(c,r(c))),a))},S:function(t){return[t[0]<<1^t[1]>>>31,t[1]<<1^t[2]>>>31,t[2]<<1^t[3]>>>31,t[3]<<1^135*(t[0]>>>31)]}},o.mode.gcm={name:"gcm",encrypt:function(t,e,n,r,i){var s=e.slice(0);return e=o.bitArray,r=r||[],t=o.mode.gcm.C(!0,t,s,r,n,i||128),e.concat(t.data,t.tag)},decrypt:function(t,e,n,r,i){var s=e.slice(0),a=o.bitArray,c=a.bitLength(s);if(i=i||128,r=r||[],i<=c?(e=a.bitSlice(s,c-i),s=a.bitSlice(s,0,c-i)):(e=s,s=[]),t=o.mode.gcm.C(!1,t,s,r,n,i),!a.equal(t.tag,e))throw new o.exception.corrupt("gcm: tag doesn't match");return t.data},ka:function(t,e){var n,r,i,s,a,c=o.bitArray.i;for(i=[0,0,0,0],s=e.slice(0),n=0;128>n;n++){for((r=(t[Math.floor(n/32)]&1<<31-n%32)!==0)&&(i=c(i,s)),a=(s[3]&1)!==0,r=3;0<r;r--)s[r]=s[r]>>>1|(s[r-1]&1)<<31;s[0]>>>=1,a&&(s[0]^=-520093696)}return i},j:function(t,e,n){var r,i=n.length;for(e=e.slice(0),r=0;r<i;r+=4)e[0]^=4294967295&n[r],e[1]^=4294967295&n[r+1],e[2]^=4294967295&n[r+2],e[3]^=4294967295&n[r+3],e=o.mode.gcm.ka(e,t);return e},C:function(t,e,n,r,i,s){var a,c,d,f,m,p,_,D,L=o.bitArray;for(p=n.length,_=L.bitLength(n),D=L.bitLength(r),c=L.bitLength(i),a=e.encrypt([0,0,0,0]),c===96?(i=i.slice(0),i=L.concat(i,[1])):(i=o.mode.gcm.j(a,[0,0,0,0],i),i=o.mode.gcm.j(a,i,[0,0,Math.floor(c/4294967296),c&4294967295])),c=o.mode.gcm.j(a,[0,0,0,0],r),m=i.slice(0),r=c.slice(0),t||(r=o.mode.gcm.j(a,c,n)),f=0;f<p;f+=4)m[3]++,d=e.encrypt(m),n[f]^=d[0],n[f+1]^=d[1],n[f+2]^=d[2],n[f+3]^=d[3];return n=L.clamp(n,_),t&&(r=o.mode.gcm.j(a,c,n)),t=[Math.floor(D/4294967296),D&4294967295,Math.floor(_/4294967296),_&4294967295],r=o.mode.gcm.j(a,r,t),d=e.encrypt(i),r[0]^=d[0],r[1]^=d[1],r[2]^=d[2],r[3]^=d[3],{tag:L.bitSlice(r,0,s),data:n}}},o.misc.hmac=function(t,e){this.W=e=e||o.hash.sha256;var n=[[],[]],r,i=e.prototype.blockSize/32;for(this.w=[new e,new e],t.length>i&&(t=e.hash(t)),r=0;r<i;r++)n[0][r]=t[r]^909522486,n[1][r]=t[r]^1549556828;this.w[0].update(n[0]),this.w[1].update(n[1]),this.R=new e(this.w[0])},o.misc.hmac.prototype.encrypt=o.misc.hmac.prototype.mac=function(t){if(this.aa)throw new o.exception.invalid("encrypt on already updated hmac called!");return this.update(t),this.digest(t)},o.misc.hmac.prototype.reset=function(){this.R=new this.W(this.w[0]),this.aa=!1},o.misc.hmac.prototype.update=function(t){this.aa=!0,this.R.update(t)},o.misc.hmac.prototype.digest=function(){var t=this.R.finalize(),t=new this.W(this.w[1]).update(t).finalize();return this.reset(),t},o.misc.pbkdf2=function(t,e,n,r,i){if(n=n||1e4,0>r||0>n)throw new o.exception.invalid("invalid params to pbkdf2");typeof t=="string"&&(t=o.codec.utf8String.toBits(t)),typeof e=="string"&&(e=o.codec.utf8String.toBits(e)),i=i||o.misc.hmac,t=new i(t);var s,a,c,d,f=[],m=o.bitArray;for(d=1;32*f.length<(r||1);d++){for(i=s=t.encrypt(m.concat(e,[d])),a=1;a<n;a++)for(s=t.encrypt(s),c=0;c<s.length;c++)i[c]^=s[c];f=f.concat(i)}return r&&(f=m.clamp(f,r)),f},o.prng=function(t){this.c=[new o.hash.sha256],this.m=[0],this.P=0,this.H={},this.N=0,this.U={},this.Z=this.f=this.o=this.ha=0,this.b=[0,0,0,0,0,0,0,0],this.h=[0,0,0,0],this.L=void 0,this.M=t,this.D=!1,this.K={progress:{},seeded:{}},this.u=this.ga=0,this.I=1,this.J=2,this.ca=65536,this.T=[0,48,64,96,128,192,256,384,512,768,1024],this.da=3e4,this.ba=80},o.prng.prototype={randomWords:function(t,e){var n=[],r;r=this.isReady(e);var i;if(r===this.u)throw new o.exception.notReady("generator isn't seeded");if(r&this.J){r=!(r&this.I),i=[];var s=0,a;for(this.Z=i[0]=new Date().valueOf()+this.da,a=0;16>a;a++)i.push(4294967296*Math.random()|0);for(a=0;a<this.c.length&&(i=i.concat(this.c[a].finalize()),s+=this.m[a],this.m[a]=0,r||!(this.P&1<<a));a++);for(this.P>=1<<this.c.length&&(this.c.push(new o.hash.sha256),this.m.push(0)),this.f-=s,s>this.o&&(this.o=s),this.P++,this.b=o.hash.sha256.hash(this.b.concat(i)),this.L=new o.cipher.aes(this.b),r=0;4>r&&(this.h[r]=this.h[r]+1|0,!this.h[r]);r++);}for(r=0;r<t;r+=4)(r+1)%this.ca===0&&E(this),i=b(this),n.push(i[0],i[1],i[2],i[3]);return E(this),n.slice(0,t)},setDefaultParanoia:function(t,e){if(t===0&&e!=="Setting paranoia=0 will ruin your security; use it only for testing")throw new o.exception.invalid("Setting paranoia=0 will ruin your security; use it only for testing");this.M=t},addEntropy:function(t,e,n){n=n||"user";var r,i,s=new Date().valueOf(),a=this.H[n],c=this.isReady(),d=0;switch(r=this.U[n],r===void 0&&(r=this.U[n]=this.ha++),a===void 0&&(a=this.H[n]=0),this.H[n]=(this.H[n]+1)%this.c.length,typeof t){case"number":e===void 0&&(e=1),this.c[a].update([r,this.N++,1,e,s,1,t|0]);break;case"object":if(n=Object.prototype.toString.call(t),n==="[object Uint32Array]"){for(i=[],n=0;n<t.length;n++)i.push(t[n]);t=i}else for(n!=="[object Array]"&&(d=1),n=0;n<t.length&&!d;n++)typeof t[n]!="number"&&(d=1);if(!d){if(e===void 0)for(n=e=0;n<t.length;n++)for(i=t[n];0<i;)e++,i=i>>>1;this.c[a].update([r,this.N++,2,e,s,t.length].concat(t))}break;case"string":e===void 0&&(e=t.length),this.c[a].update([r,this.N++,3,e,s,t.length]),this.c[a].update(t);break;default:d=1}if(d)throw new o.exception.bug("random: addEntropy only supports number, array of numbers or string");this.m[a]+=e,this.f+=e,c===this.u&&(this.isReady()!==this.u&&y("seeded",Math.max(this.o,this.f)),y("progress",this.getProgress()))},isReady:function(t){return t=this.T[t!==void 0?t:this.M],this.o&&this.o>=t?this.m[0]>this.ba&&new Date().valueOf()>this.Z?this.J|this.I:this.I:this.f>=t?this.J|this.u:this.u},getProgress:function(t){return t=this.T[t||this.M],this.o>=t||this.f>t?1:this.f/t},startCollectors:function(){if(!this.D){if(this.a={loadTimeCollector:v(this,this.ma),mouseCollector:v(this,this.oa),keyboardCollector:v(this,this.la),accelerometerCollector:v(this,this.ea),touchCollector:v(this,this.qa)},window.addEventListener)window.addEventListener("load",this.a.loadTimeCollector,!1),window.addEventListener("mousemove",this.a.mouseCollector,!1),window.addEventListener("keypress",this.a.keyboardCollector,!1),window.addEventListener("devicemotion",this.a.accelerometerCollector,!1),window.addEventListener("touchmove",this.a.touchCollector,!1);else if(document.attachEvent)document.attachEvent("onload",this.a.loadTimeCollector),document.attachEvent("onmousemove",this.a.mouseCollector),document.attachEvent("keypress",this.a.keyboardCollector);else throw new o.exception.bug("can't attach event");this.D=!0}},stopCollectors:function(){this.D&&(window.removeEventListener?(window.removeEventListener("load",this.a.loadTimeCollector,!1),window.removeEventListener("mousemove",this.a.mouseCollector,!1),window.removeEventListener("keypress",this.a.keyboardCollector,!1),window.removeEventListener("devicemotion",this.a.accelerometerCollector,!1),window.removeEventListener("touchmove",this.a.touchCollector,!1)):document.detachEvent&&(document.detachEvent("onload",this.a.loadTimeCollector),document.detachEvent("onmousemove",this.a.mouseCollector),document.detachEvent("keypress",this.a.keyboardCollector)),this.D=!1)},addEventListener:function(t,e){this.K[t][this.ga++]=e},removeEventListener:function(t,e){var n,r,i=this.K[t],s=[];for(r in i)i.hasOwnProperty(r)&&i[r]===e&&s.push(r);for(n=0;n<s.length;n++)r=s[n],delete i[r]},la:function(){g(this,1)},oa:function(t){var e,n;try{e=t.x||t.clientX||t.offsetX||0,n=t.y||t.clientY||t.offsetY||0}catch{n=e=0}e!=0&&n!=0&&this.addEntropy([e,n],2,"mouse"),g(this,0)},qa:function(t){t=t.touches[0]||t.changedTouches[0],this.addEntropy([t.pageX||t.clientX,t.pageY||t.clientY],1,"touch"),g(this,0)},ma:function(){g(this,2)},ea:function(t){if(t=t.accelerationIncludingGravity.x||t.accelerationIncludingGravity.y||t.accelerationIncludingGravity.z,window.orientation){var e=window.orientation;typeof e=="number"&&this.addEntropy(e,1,"accelerometer")}t&&this.addEntropy(t,2,"accelerometer"),g(this,0)}};function y(t,e){var n,r=o.random.K[t],i=[];for(n in r)r.hasOwnProperty(n)&&i.push(r[n]);for(n=0;n<i.length;n++)i[n](e)}function g(t,e){typeof window<"u"&&window.performance&&typeof window.performance.now=="function"?t.addEntropy(window.performance.now(),e,"loadtime"):t.addEntropy(new Date().valueOf(),e,"loadtime")}function E(t){t.b=b(t).concat(b(t)),t.L=new o.cipher.aes(t.b)}function b(t){for(var e=0;4>e&&(t.h[e]=t.h[e]+1|0,!t.h[e]);e++);return t.L.encrypt(t.h)}function v(t,e){return function(){e.apply(t,arguments)}}o.random=new o.prng(6);t:try{var x,k,w,B;if(B=l.exports){var S;try{S=at}catch{S=null}B=k=S}if(B&&k.randomBytes)x=k.randomBytes(128),x=new Uint32Array(new Uint8Array(x).buffer),o.random.addEntropy(x,1024,"crypto['randomBytes']");else if(typeof window<"u"&&typeof Uint32Array<"u"){if(w=new Uint32Array(32),window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(w);else if(window.msCrypto&&window.msCrypto.getRandomValues)window.msCrypto.getRandomValues(w);else break t;o.random.addEntropy(w,1024,"crypto['getRandomValues']")}}catch(t){typeof window<"u"&&window.console&&(console.log("There was an error collecting entropy from the browser:"),console.log(t))}o.json={defaults:{v:1,iter:1e4,ks:128,ts:64,mode:"ccm",adata:"",cipher:"aes"},ja:function(t,e,n,r){n=n||{},r=r||{};var i=o.json,s=i.g({iv:o.random.randomWords(4,0)},i.defaults),a;if(i.g(s,n),n=s.adata,typeof s.salt=="string"&&(s.salt=o.codec.base64.toBits(s.salt)),typeof s.iv=="string"&&(s.iv=o.codec.base64.toBits(s.iv)),!o.mode[s.mode]||!o.cipher[s.cipher]||typeof t=="string"&&100>=s.iter||s.ts!==64&&s.ts!==96&&s.ts!==128||s.ks!==128&&s.ks!==192&&s.ks!==256||2>s.iv.length||4<s.iv.length)throw new o.exception.invalid("json encrypt: invalid parameters");return typeof t=="string"?(a=o.misc.cachedPbkdf2(t,s),t=a.key.slice(0,s.ks/32),s.salt=a.salt):o.ecc&&t instanceof o.ecc.elGamal.publicKey&&(a=t.kem(),s.kemtag=a.tag,t=a.key.slice(0,s.ks/32)),typeof e=="string"&&(e=o.codec.utf8String.toBits(e)),typeof n=="string"&&(s.adata=n=o.codec.utf8String.toBits(n)),a=new o.cipher[s.cipher](t),i.g(r,s),r.key=t,s.ct=s.mode==="ccm"&&o.arrayBuffer&&o.arrayBuffer.ccm&&e instanceof ArrayBuffer?o.arrayBuffer.ccm.encrypt(a,e,s.iv,n,s.ts):o.mode[s.mode].encrypt(a,e,s.iv,n,s.ts),s},encrypt:function(t,e,n,r){var i=o.json,s=i.ja.apply(i,arguments);return i.encode(s)},ia:function(t,e,n,r){n=n||{},r=r||{};var i=o.json;e=i.g(i.g(i.g({},i.defaults),e),n,!0);var s,a;if(s=e.adata,typeof e.salt=="string"&&(e.salt=o.codec.base64.toBits(e.salt)),typeof e.iv=="string"&&(e.iv=o.codec.base64.toBits(e.iv)),!o.mode[e.mode]||!o.cipher[e.cipher]||typeof t=="string"&&100>=e.iter||e.ts!==64&&e.ts!==96&&e.ts!==128||e.ks!==128&&e.ks!==192&&e.ks!==256||!e.iv||2>e.iv.length||4<e.iv.length)throw new o.exception.invalid("json decrypt: invalid parameters");return typeof t=="string"?(a=o.misc.cachedPbkdf2(t,e),t=a.key.slice(0,e.ks/32),e.salt=a.salt):o.ecc&&t instanceof o.ecc.elGamal.secretKey&&(t=t.unkem(o.codec.base64.toBits(e.kemtag)).slice(0,e.ks/32)),typeof s=="string"&&(s=o.codec.utf8String.toBits(s)),a=new o.cipher[e.cipher](t),s=e.mode==="ccm"&&o.arrayBuffer&&o.arrayBuffer.ccm&&e.ct instanceof ArrayBuffer?o.arrayBuffer.ccm.decrypt(a,e.ct,e.iv,e.tag,s,e.ts):o.mode[e.mode].decrypt(a,e.ct,e.iv,s,e.ts),i.g(r,e),r.key=t,n.raw===1?s:o.codec.utf8String.fromBits(s)},decrypt:function(t,e,n,r){var i=o.json;return i.ia(t,i.decode(e),n,r)},encode:function(t){var e,n="{",r="";for(e in t)if(t.hasOwnProperty(e)){if(!e.match(/^[a-z0-9]+$/i))throw new o.exception.invalid("json encode: invalid property name");switch(n+=r+'"'+e+'":',r=",",typeof t[e]){case"number":case"boolean":n+=t[e];break;case"string":n+='"'+escape(t[e])+'"';break;case"object":n+='"'+o.codec.base64.fromBits(t[e],0)+'"';break;default:throw new o.exception.bug("json encode: unsupported type")}}return n+"}"},decode:function(t){if(t=t.replace(/\s/g,""),!t.match(/^\{.*\}$/))throw new o.exception.invalid("json decode: this isn't json!");t=t.replace(/^\{|\}$/g,"").split(/,/);var e={},n,r;for(n=0;n<t.length;n++){if(!(r=t[n].match(/^\s*(?:(["']?)([a-z][a-z0-9]*)\1)\s*:\s*(?:(-?\d+)|"([a-z0-9+\/%*_.@=\-]*)"|(true|false))$/i)))throw new o.exception.invalid("json decode: this isn't json!");r[3]!=null?e[r[2]]=parseInt(r[3],10):r[4]!=null?e[r[2]]=r[2].match(/^(ct|adata|salt|iv)$/)?o.codec.base64.toBits(r[4]):unescape(r[4]):r[5]!=null&&(e[r[2]]=r[5]==="true")}return e},g:function(t,e,n){if(t===void 0&&(t={}),e===void 0)return t;for(var r in e)if(e.hasOwnProperty(r)){if(n&&t[r]!==void 0&&t[r]!==e[r])throw new o.exception.invalid("required parameter overridden");t[r]=e[r]}return t},sa:function(t,e){var n={},r;for(r in t)t.hasOwnProperty(r)&&t[r]!==e[r]&&(n[r]=t[r]);return n},ra:function(t,e){var n={},r;for(r=0;r<e.length;r++)t[e[r]]!==void 0&&(n[e[r]]=t[e[r]]);return n}},o.encrypt=o.json.encrypt,o.decrypt=o.json.decrypt,o.misc.pa={},o.misc.cachedPbkdf2=function(t,e){var n=o.misc.pa,r;return e=e||{},r=e.iter||1e3,n=n[t]=n[t]||{},r=n[r]=n[r]||{firstSalt:e.salt&&e.salt.length?e.salt.slice(0):o.random.randomWords(2,0)},n=e.salt===void 0?r.firstSalt:e.salt,r[n]=r[n]||o.misc.pbkdf2(t,n,e.iter),{key:r[n].slice(0),salt:n.slice(0)}},l.exports&&(l.exports=o)}(z)),z.exports}var At=Lt();const ct=st(At);function It(l){if(typeof l!="string")throw new Error("Вхідні дані повинні бути рядком (String).");return Dt(l).toString()}function Ct(l,o){if(typeof l!="string"||typeof o!="string")throw new Error("Plaintext and password must be strings.");try{return ct.encrypt(o,l)}catch(h){throw console.error("Помилка шифрування SJCL:",h),h}}function lt(l,o){if(typeof o!="string")throw new Error("Password must be a string.");if(typeof l!="string"&&typeof l!="object")throw new Error("Encrypted data must be a string or an object.");try{return ct.decrypt(o,l)}catch(h){throw console.error("Помилка дешифрування SJCL:",h),new Error("Не вдалося дешифрувати дані. Перевірте пароль або цілісність даних.")}}async function Nt(l,o,h,u,y){const g={id_note:l,fid_user:o,date:h,text:u,text_hash:y};try{const E=await fetch("http://localhost:8000/api/addNote",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(g)});if(!E.ok){const v=await E.json();throw new Error(`Помилка: ${JSON.stringify(v)}`)}return await E.json()}catch(E){throw console.error("Помилка додавання замітки:",E),E}}async function Ot(l,o,h){const u={id_note:l,text:o,text_hash:h};try{const y=await fetch("http://localhost:8000/api/editNote",{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(u)});if(!y.ok){const E=await y.json();throw new Error(`Помилка: ${JSON.stringify(E)}`)}return await y.json()}catch(y){throw console.error("Помилка зміни замітки:",y),y}}async function Mt(l){const o={id_note:l};try{const h=await fetch("http://localhost:8000/api/deleteNote",{method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(o)});if(!h.ok){const y=await h.json();throw new Error(`Помилка: ${JSON.stringify(y)}`)}const u=await h.json();return{status:h.status,ok:h.ok,data:u}}catch(h){throw console.error("Помилка додавання замітки:",h),h}}let V=new Date;const dt=[];function X(){return V}function q(l){V=new Date(l),dt.forEach(o=>o(V))}function ft(l){dt.push(l)}const jt=document.getElementById("prev-month"),Tt=document.getElementById("next-month"),W=document.getElementById("sidebar-days");let C=new Date;function J(l){W.innerHTML="",W.classList.add("calendar-sidebar__days--visible");const o=l.getFullYear(),h=l.getMonth(),y=new Date(o,h,1).getDay(),g=42,E=new Date,b=X(),v=(k,w)=>k.getFullYear()===w.getFullYear()&&k.getMonth()===w.getMonth()&&k.getDate()===w.getDate();let x=new Date(o,h,1-y);for(let k=0;k<g;k++){const w=document.createElement("li");w.classList.add("calendar-sidebar__day"),w.textContent=x.getDate().toString(),x.getMonth()!==h&&w.classList.add("calendar-sidebar__day--other"),v(x,E)&&w.classList.add("calendar-sidebar__day--selected"),v(x,b)&&w.classList.add("calendar-sidebar__day--checked"),w.addEventListener("click",()=>{q(x)}),W.appendChild(w),x.setDate(x.getDate()+1)}}ft(l=>{C=new Date(l),J(C)});jt.addEventListener("click",()=>{C.setMonth(C.getMonth()-1),J(C)});Tt.addEventListener("click",()=>{C.setMonth(C.getMonth()+1),J(C)});J(C);const $t=document.getElementById("month-title"),Pt=document.getElementById("month-title__highlight"),Rt=document.getElementById("prev-month"),Ht=document.getElementById("next-month"),qt=["January","February","March","April","May","June","July","August","September","October","November","December"];let N=new Date;function Z(l){const o=qt[l.getMonth()],h=l.getFullYear();$t.firstChild.nodeValue=`${o} `,Pt.textContent=h}Rt.addEventListener("click",()=>{N.setMonth(N.getMonth()-1),Z(N)});Ht.addEventListener("click",()=>{N.setMonth(N.getMonth()+1),Z(N)});Z(N);class Jt{constructor(o){this.modal=o,this.blocks=o.querySelectorAll(".js-signin-modal-block"),this.switchers=o.querySelectorAll(".js-signin-modal-switcher a"),this.triggers=document.querySelectorAll(".js-signin-modal-trigger"),this.hidePasswordBtns=o.querySelectorAll(".js-hide-password"),this.init()}init(){this.triggers.forEach(o=>{o.addEventListener("click",h=>{const u=h.target.closest("[data-signin]");if(u){h.preventDefault();const y=u.getAttribute("data-signin");this.showForm(y)}})}),this.modal.addEventListener("click",o=>{(o.target.classList.contains("js-signin-modal")||o.target.classList.contains("js-close"))&&(o.preventDefault(),this.modal.classList.remove("signin-modal--is-visible"))}),this.hidePasswordBtns.forEach(o=>{o.addEventListener("click",()=>this.togglePassword(o))})}togglePassword(o){const h=o.previousElementSibling,u=h.type==="password";h.type=u?"text":"password",o.textContent=u?"Hide":"Show",this.putCursorAtEnd(h)}showForm(o){this.modal.classList.add("signin-modal--is-visible"),this.blocks.forEach(u=>{u.classList.toggle("signin-modal__block--is-selected",u.getAttribute("data-type")===o)});const h=o==="signup"?"signup":"login";this.switchers.forEach(u=>{u.classList.toggle("selected",u.getAttribute("data-type")===h)})}putCursorAtEnd(o){o.focus();const h=o.value.length;o.setSelectionRange(h,h)}}const rt=document.querySelector(".js-signin-modal");rt&&new Jt(rt);const Y=document.querySelector(".js-main-nav");Y&&Y.addEventListener("click",l=>{l.target.classList.contains("js-main-nav")&&Y.querySelector("ul").classList.toggle("main-nav__list--is-visible")});const Ft=document.getElementById("signin");Ft.addEventListener("click",async l=>{var u,y,g;l.preventDefault();const o=(u=document.querySelector("#signin-email"))==null?void 0:u.value.trim(),h=(y=document.querySelector("#signin-password"))==null?void 0:y.value;try{const E=await mt(o,h);if(E&&E.id_user){const{id_user:b,email:v,password:x,nickname:k,fullname:w,gender:B,country:S}=E;localStorage.setItem("id_user",JSON.stringify(b)),localStorage.setItem("email",JSON.stringify(v)),localStorage.setItem("password",JSON.stringify(x)),localStorage.setItem("nickname",JSON.stringify(k)),localStorage.setItem("fullname",JSON.stringify(w)),localStorage.setItem("gender",JSON.stringify(B)),localStorage.setItem("country",JSON.stringify(S)),(g=document.querySelector(".js-signin-modal"))==null||g.classList.remove("signin-modal--is-visible"),yt({username:k,fullName:w},!0)}else alert("Неправильні облікові дані")}catch(E){console.error("Помилка під час авторизації:",E),alert("Сталася помилка під час авторизації")}});const A={},Ut=JSON.parse(localStorage.getItem("all_notes"))||{};for(const[l,o]of Object.entries(Ut))A[l]=o;ht(new Date);const ot=document.querySelector(".calendar-sidebar__task-list"),zt=["SUN","MON","TUE","WED","THU","FRI","SAT"];function Wt(l){const o=l.getFullYear(),h=(l.getMonth()+1).toString().padStart(2,"0"),u=l.getDate().toString().padStart(2,"0");return`${o}-${h}-${u}`}function Yt(l){return`${l.getMonth()+1}/${l.getDate()}/${l.getFullYear()}`}function Gt(l){return l===0?"TODAY":l===1?"TOMORROW":zt[new Date(Date.now()+l*864e5).getDay()]}function Vt(l){let o=l;return o=o.replace(/\*\*(.*?)\*\*/gs,"$1"),o=o.replace(/\*(.*?)\*/gs,"$1"),o=o.replace(/_(.*?)_/gs,"$1"),o=o.replace(/<br\s*\/?>/gi,`
`),o}function Kt(l){return l.split(/\r?\n/)}function Xt(l){return l.length>20?l.slice(0,20)+"...":l}function R(l){var o,h;ot.innerHTML="";for(let u=0;u<9;u++){const y=new Date(l);y.setDate(y.getDate()+u);const g=Gt(u),E=Wt(y),b=Yt(y),v=A[E]||[],x=document.createElement("li");x.classList.add("calendar-sidebar__task-item"),u===0&&((h=(o=x.querySelector)==null?void 0:o.call(x,"h3"))==null||h.classList.add("calendar-sidebar__task-day--selected")),x.innerHTML=`
      <div class="calendar-sidebar__task-header">
        <div class="calendar-sidebar__task-time">
          <h3 class="calendar-sidebar__task-day ${u===0?"calendar-sidebar__task-day--selected":""}">${g}</h3>
          <p class="calendar-sidebar__task-date ${u===0?"calendar-sidebar__task-date--selected":""}">${b}</p>
        </div>
      </div>
      <ul class="calendar-sidebar__task-tasks"></ul>
    `;const k=x.querySelector(".calendar-sidebar__task-tasks");v.forEach(w=>{const B=document.createElement("li"),S=localStorage.getItem("password"),t=lt(w.text,S),e=Vt(t),r=Kt(e)[0],i=Xt(r);B.classList.add("calendar-sidebar__task-tasks-item"),B.innerHTML=`
        <div class="calendar-sidebar__task-tasks-circle"></div>
        <p class="calendar-sidebar__task-tasks-text">${i}</p>
      `,k.appendChild(B)}),ot.appendChild(x)}}R(new Date);const Zt=document.getElementById("add-note");Zt.addEventListener("click",()=>{H()});function H(l=null){const o=document.createElement("div");o.id="editor",o.className="note-box__container";const h=document.createElement("textarea");h.className="note-box__editor",h.rows=5;const u=document.createElement("div");u.className="note-box__buttons",u.innerHTML=`
    <div class="note-box__tool">
        <div class="note-box__tool-formatting">
          <button class="note-btn bold"><b>Bold</b></button>
          <button class="note-btn italic"><i>Italic</i></button>
          <button class="note-btn underline"><u>Underline</u></button>
        </div>
        <div class="note-box__action">
          <button class="note-btn note-save">Save</button>
          <button class="note-btn note-cancel">Cancel</button>
          <button class="note-btn note-remove">Remove</button>
        </div>
      </div>
  `,o.appendChild(h),o.appendChild(u);const y=document.getElementById("day-event");console.log(y.dataset.date),l?(h.value=l.dataset.raw||l.innerText,o.dataset.existing="true",o.dataset.noteId=l.dataset.noteId,o.dataset.original=h.value,y.replaceChild(o,l)):(o.dataset.original="",y.appendChild(o)),u.querySelector(".bold").onclick=()=>G(h,"**"),u.querySelector(".italic").onclick=()=>G(h,"*"),u.querySelector(".underline").onclick=()=>G(h,"_"),u.querySelector(".note-save").onclick=async()=>{const g=h.value,E=K(g),b=document.createElement("div");b.className="note-display",b.innerHTML=E,b.dataset.raw=g,b.onclick=()=>H(b);const v=document.getElementById("day-event").dataset.date;A[v]||(A[v]=[]);const x=localStorage.getItem("password");if(!x){alert("Шифрувальний ключ не знайдено!");return}const k=Ct(g,x),w=It(g),B=localStorage.getItem("id_user");if(o.dataset.existing==="true"){const S=o.dataset.noteId;b.dataset.noteId=S;const t=A[v].findIndex(n=>n.id===Number(S));t!==-1&&(A[v][t]={id:Number(S),text:k,hash:w});const e=JSON.parse(localStorage.getItem("all_notes"))||{};if(e[v]){const n=e[v].findIndex(r=>r.id===Number(S));n!==-1&&(e[v][n].text=k,e[v][n].hash=w,localStorage.setItem("all_notes",JSON.stringify(e)))}try{const n=await Ot(Number(S),k,w),r=JSON.parse(localStorage.getItem("all_notes_synced"))||{};if(r[v]){const i=r[v].findIndex(s=>s.id===Number(S));i!==-1&&(r[v][i].id=Number(n.id),r[v][i].hash=n.hash,localStorage.setItem("all_notes_synced",JSON.stringify(r)))}}catch(n){console.error("Не вдалося оновити замітку на сервері:",n)}finally{y.replaceChild(b,o)}}else{const S=Date.now().toString();b.dataset.noteId=S,A[v].push({id:Number(S),text:k,hash:w});const t=JSON.parse(localStorage.getItem("all_notes"))||{};t[v]||(t[v]=[]),t[v].push({id:Number(S),text:k,hash:w}),localStorage.setItem("all_notes",JSON.stringify(t));try{const e=await Nt(Number(S),Number(B),v,k,w);console.log("addNotes response:",e);const n=JSON.parse(localStorage.getItem("all_notes_synced"))||{};n[v]||(n[v]=[]),n[v].push({id:Number(e.id_note),hash:e.text_hash}),localStorage.setItem("all_notes_synced",JSON.stringify(n))}catch(e){console.error("Не вдалося синхронізувати замітку з сервером:",e)}finally{y.replaceChild(b,o)}}R(new Date)},u.querySelector(".note-cancel").onclick=()=>{if(o.dataset.existing==="true"){const g=document.createElement("div");g.className="note-display",g.dataset.noteId=o.dataset.noteId,g.dataset.raw=o.dataset.original,g.innerHTML=K(o.dataset.original),g.onclick=()=>H(g),y.replaceChild(g,o)}else y.removeChild(o)},u.querySelector(".note-remove").onclick=async()=>{const g=y.dataset.date;if(o.dataset.existing==="true"){if(confirm("Чи дійсно ви хочете видалити дану замітку?")){const b=o.dataset.noteId;A[g]&&(A[g]=A[g].filter(x=>x.id!==Number(b)),console.log(A),A[g].length===0&&delete A[g]);let v=JSON.parse(localStorage.getItem("all_notes"))||{};v[g]&&(v[g]=v[g].filter(x=>String(x.id)!==b),v[g].length===0&&delete v[g],localStorage.setItem("all_notes",JSON.stringify(v)));try{if((await Mt(Number(b))).status===200){let w=JSON.parse(localStorage.getItem("all_notes_synced"))||{};w[g]&&(w[g]=w[g].filter(B=>String(B.id)!==b),w[g].length===0&&delete w[g],localStorage.setItem("all_notes_synced",JSON.stringify(w)))}const k=document.querySelector(`.note-display[data-note-id="${b}"]`);k&&k.remove()}catch(x){console.error("Помилка під час видалення замітки:",x)}finally{o.remove(),R(new Date)}}}else o.remove(),R(new Date)}}function K(l){return l.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\*\*(.*?)\*\*/gs,'<span class="bold">$1</span>').replace(/\*(.*?)\*/gs,'<span class="italic">$1</span>').replace(/_(.*?)_/gs,'<span class="underline">$1</span>').replace(/\n/g,"<br>")}function G(l,o){const h=l.selectionStart,u=l.selectionEnd,y=l.value.slice(h,u),g=l.value.slice(0,h),E=l.value.slice(u);l.value=g+o+y+o+E,l.focus(),l.selectionStart=h+o.length,l.selectionEnd=u+o.length}function Qt(l){const o=l.getFullYear(),h=(l.getMonth()+1).toString().padStart(2,"0"),u=l.getDate().toString().padStart(2,"0");return`${o}-${h}-${u}`}function ht(l){const o=Qt(l),h=document.getElementById("day-event");if(h.innerHTML="",h.dataset.date=o,A!=null&&A[o])for(const u of A[o]){const y=document.createElement("div");y.className="note-display",y.dataset.noteId=u.id;const g=localStorage.getItem("password"),E=lt(u.text,g);y.dataset.raw=E,y.innerHTML=K(E),y.onclick=()=>H(y),h.appendChild(y)}}const te=document.getElementById("prev-day"),ee=document.getElementById("today"),ne=document.getElementById("next-day"),it=document.getElementById("sidebar-days"),re=document.getElementById("day-event"),oe=document.getElementById("month-title"),ie=document.getElementById("month-title__highlight");let I=X();function se(l){const o=["January","February","March","April","May","June","July","August","September","October","November","December"];oe.firstChild.nodeValue=`${o[l.getMonth()]} `,ie.textContent=l.getFullYear()}function ut(l){const o=new Date,h=(B,S)=>B.getFullYear()===S.getFullYear()&&B.getMonth()===S.getMonth()&&B.getDate()===S.getDate(),u=X(),y=l.getFullYear(),g=l.getMonth(),b=new Date(y,g,1).getDay();let v=new Date(y,g,1-b);it.innerHTML="";for(let B=0;B<42;B++){const S=document.createElement("li");S.classList.add("calendar-sidebar__day"),S.textContent=v.getDate().toString(),v.getMonth()!==g&&S.classList.add("calendar-sidebar__day--other"),h(v,o)&&S.classList.add("calendar-sidebar__day--selected"),h(v,u)&&S.classList.add("calendar-sidebar__day--checked"),it.appendChild(S),v.setDate(v.getDate()+1)}const x=u.getFullYear(),k=(u.getMonth()+1).toString().padStart(2,"0"),w=u.getDate().toString().padStart(2,"0");re.dataset.date=`${x}-${k}-${w}`,se(l)}ft(l=>{I=new Date(l);const o=document.getElementById("editor");o&&o.remove(),ut(I),ht(I)});te.addEventListener("click",()=>{I.setDate(I.getDate()-1);const l=document.getElementById("editor");l&&l.remove(),q(I)});ne.addEventListener("click",()=>{I.setDate(I.getDate()+1);const l=document.getElementById("editor");l&&l.remove(),q(I)});ee.addEventListener("click",()=>{I=new Date;const l=document.getElementById("editor");l&&l.remove(),q(I)});ut(I);const ae=document.getElementById("prev-day"),ce=document.getElementById("today"),le=document.getElementById("next-day"),de=document.getElementById("main-day-name"),fe=document.getElementById("main-day-number"),he=["SUN","MON","TUE","WED","THU","FRI","SAT"];let O=new Date;function ue(l){return`${l.getDate()}`}function pe(l){return he[l.getDay()]}function F(){de.textContent=pe(O),fe.textContent=ue(O)}ae.addEventListener("click",()=>{O.setDate(O.getDate()-1),F()});le.addEventListener("click",()=>{O.setDate(O.getDate()+1),F()});ce.addEventListener("click",()=>{O=new Date,F()});F();
